<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Select Your Interests</title>

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Material Symbols -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="../css/interest.css" />
  </head>

  <body>
    <!-- ===== HEADER ===== -->
    <header>
      <!-- LEFT SIDE -->
      <div class="header-left">
        <div class="logo">
          <a href="../index.html">
            <img src="../assets/logo.png" class="nav_img_logo" id="siteLogo" alt="SkillVora Logo">
          </a>
        </div>
      </div>

      <!-- RIGHT SIDE -->
      <div style="display:flex; align-items:center; gap:1.25rem;">
        <a href="../CheckResume/resume-checker.html" class="btn outline small">
          Resume Checker
        </a>

        <div class="theme-toggle">
          <img id="themeIcon" src="../assets/sun_line.png" alt="Toggle theme">
        </div>
      </div>
    </header>

    <div class="container">
      <div class="step-header">
        <span class="step-title" id="stepTitle"></span>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <h2>Select Your Interests</h2>
      <p class="subtitle">Choose which careers interests.</p>

      <div class="interest-list">
        <button class="interest" data-interest="technology">
          <span class="material-symbols-rounded">computer</span>
          Technology
        </button>

        <button class="interest" data-interest="design">
          <span class="material-symbols-rounded">draw</span>
          Design & Creativity
        </button>

        <button class="interest" data-interest="business">
          <span class="material-symbols-rounded">business_center</span>
          Business & Management
        </button>

        <button class="interest" data-interest="data">
          <span class="material-symbols-rounded">analytics</span>
          Data & Analytics
        </button>

        <button class="interest" data-interest="communication">
          <span class="material-symbols-rounded">chat</span>
          Communication
        </button>

        <button class="interest" data-interest="education">
          <span class="material-symbols-rounded">school</span>
          Education
        </button>
      </div>

      <div class="interest-footer">

        <button class="back-btn" id="backBtn">Back</button>

        <button class="next-btn" id="nextBtn" disabled>Next</button>
      </div>
    </div>

    <script>
      const userType = localStorage.getItem("userType"); // "SPM Leavers" / "Job Seeker"
      
      const stepTitle = document.getElementById("stepTitle");
      const progressFill = document.getElementById("progressFill");
      const backBtn = document.getElementById("backBtn");
      const nextBtn = document.getElementById("nextBtn");
      const buttons = document.querySelectorAll(".interest");

      // ✅ Step title dynamic
      if (userType === "SPM Leavers") {
        stepTitle.innerHTML = `Step 1 of 2 – <strong>Interests</strong>`;
      } else {
        stepTitle.innerHTML = `Step 1 of 3 – <strong>Interests</strong>`;
      }

      // ✅ Store correct interest label
      const interestMap = {
        technology: "Technology",
        design: "Design & Creativity",
        business: "Business & Management",
        data: "Data & Analytics",
        communication: "Communication",
        education: "Education",
      };

      progressFill.style.width = "0%";
      nextBtn.disabled = true;

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const active = btn.classList.contains("active");
          buttons.forEach((b) => b.classList.remove("active"));

          if (!active) {
            btn.classList.add("active");

            // ✅ save interest
            localStorage.setItem("interest", interestMap[btn.dataset.interest]);

            // ✅ progress changes by flow
            if (userType === "SPM Leavers") {
              progressFill.style.width = "50%";
            } else {
              progressFill.style.width = "30%";
            }

            nextBtn.disabled = false;
          } else {
            localStorage.removeItem("interest");
            progressFill.style.width = "0%";
            nextBtn.disabled = true;
          }
        });
      });

      /* ✅ Back button depends on flow */
      backBtn.addEventListener("click", () => {
        window.location.href = "user-type.html";
      });

      // ✅ Next depends on user type
      nextBtn.addEventListener("click", () => {
        if (nextBtn.disabled) return;

        if (userType === "SPM Leavers") {
          window.location.href = "skills.html"; // skip background
        } else {
          window.location.href = "background.html"; // normal
        }
      });
    </script>
  </body>
      <script src="../js/theme-toggle.js"></script>
</html>
