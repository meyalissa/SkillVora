<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Select Your Skills</title>

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Material Symbols -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded"
      rel="stylesheet"
    />

    <!-- Page CSS -->
    <link rel="stylesheet" href="../css/skills.css" />

    <!-- âœ… Breadcrumb custom style -->
    <style>
      /* breadcrumb preview line */
      .selection-preview {
        margin: 18px 0 22px;
        font-size: 16px;
        font-weight: 500;
      }

      /* Interest = grey */
      .selection-preview .interest-label,
      .selection-preview .interest-value {
        color: #656b81; /* matches your theme grey */
        font-weight: 600;
      }

      /* Background = green */
      .selection-preview .bg-label,
      .selection-preview .bg-value {
        color: var(--primary-color); /* theme green */
        font-weight: 700;
      }

      /* arrow style */
      .selection-preview .arrow {
        color: #656b81;
        font-weight: 600;
        margin: 0 6px;
      }
    </style>
  </head>

  <body>
    <!-- ===== HEADER ===== -->
    <header>
      <!-- LEFT SIDE -->
      <div class="header-left">
        <div class="logo">
          <a href="../index.html">
            <img src="../assets/logo.png" class="nav_img_logo" id="siteLogo" alt="SkillVora Logo">
          </a>
        </div>
      </div>

      <!-- RIGHT SIDE -->
      <div style="display:flex; align-items:center; gap:1.25rem;">
        <a href="../CheckResume/resume-checker.html" class="btn outline small">
          Resume Checker
        </a>

        <div class="theme-toggle">
          <img id="themeIcon" src="../assets/sun_line.png" alt="Toggle theme">
        </div>
      </div>
    </header>

    <div class="container">
      <!-- Step -->
      <div class="step-header">
        <span class="step-title" id="stepTitle"></span>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <h2>Select Your Skills</h2>
      <p class="subtitle">Choose skills you have or enjoy using.</p>
      <p class="helper-text">You may select up to 3 options</p>

      <!-- âœ… Breadcrumb Preview -->
      <p class="selection-preview" id="previewBox"></p>

      <div class="skills-list">
        <button class="skill" data-skill="Problem-solving">
          <span class="material-symbols-rounded icon">psychology</span>
          Problem-solving
        </button>

        <button class="skill" data-skill="Communication">
          <span class="material-symbols-rounded icon">chat</span>
          Communication
        </button>

        <button class="skill" data-skill="Creativity">
          <span class="material-symbols-rounded icon">palette</span>
          Creativity
        </button>

        <button class="skill" data-skill="Analytical thinking">
          <span class="material-symbols-rounded icon">analytics</span>
          Analytical thinking
        </button>

        <button class="skill" data-skill="Practical or hands-on skills">
          <span class="material-symbols-rounded icon">build</span>
          Practical / Hands-on Skills
        </button>

        <button class="skill" data-skill="Organisational skills">
          <span class="material-symbols-rounded icon">inventory_2</span>
          Organisational skills
        </button>
      </div>

      

      <!-- Footer -->
      <div class="skills-footer">
        <button class="back-btn" id="backBtn">Back</button>

        <button class="next-btn" id="nextBtn" disabled>
          Show Suggested Careers
        </button>
      </div>
    </div>

    <!-- Loading Popup -->
    <div id="loadingModal" class="loading-modal">
      <div class="loading-content">
        <div class="spinner"></div>
        <p>Analyzing Suitable Career Paths, please wait...</p>
      </div>
    </div>

    <script>
      const userType = localStorage.getItem("userType"); // "SPM Leavers" / "Job Seeker"

      const stepTitle = document.getElementById("stepTitle");
      const progressFill = document.getElementById("progressFill");
      const nextBtn = document.getElementById("nextBtn");
      const backBtn = document.getElementById("backBtn");
      const previewBox = document.getElementById("previewBox");
      const skillButtons = document.querySelectorAll(".skill");

      let selectedSkills = [];

      const interest = localStorage.getItem("interest");
      const background = localStorage.getItem("background");

      /* âœ… Breadcrumb structure with colours */
      if (userType === "SPM Leavers") {
        // Student flow â†’ no background
        previewBox.innerHTML = `
          <span class="interest-label">Interest:</span>
          <span class="interest-value">${interest || "-"}</span>
        `;
      } else {
        // Job seeker flow â†’ show interest + background
        previewBox.innerHTML = `
          <span class="interest-label">Interest:</span>
          <span class="interest-value">${interest || "-"}</span>

          <span class="arrow">&gt;</span>

          <span class="bg-label">Background:</span>
          <span class="bg-value">${background || "-"}</span>
        `;
      }

      /* âœ… Step title dynamic */
      if (userType === "SPM Leavers") {
        stepTitle.innerHTML = `Step 2 of 2 â€“ <strong>Skills</strong>`;
        progressFill.style.width = "50%";
      } else {
        stepTitle.innerHTML = `Step 3 of 3 â€“ <strong>Skills</strong>`;
        progressFill.style.width = "60%";
      }

      nextBtn.disabled = true;

      /* âœ… Skill selection logic */
      skillButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const skillValue = button.dataset.skill;

          if (button.classList.contains("active")) {
            button.classList.remove("active");
            selectedSkills = selectedSkills.filter((s) => s !== skillValue);
          } else {
            if (selectedSkills.length >= 3) return;
            button.classList.add("active");
            selectedSkills.push(skillValue);
          }

          if (selectedSkills.length > 0) {
            progressFill.style.width = "100%";
            nextBtn.disabled = false;
          } else {
            progressFill.style.width =
              userType === "SPM Leavers" ? "50%" : "60%";
            nextBtn.disabled = true;
          }
        });
      });

      /* âœ… Back button depends on flow */
      backBtn.addEventListener("click", () => {
        if (userType === "SPM Leavers") {
          window.location.href = "interest.html";
        } else {
          window.location.href = "background.html";
        }
      });

      /* âœ… Save skills and go suggestion */
      nextBtn.addEventListener("click", () => {
        if (selectedSkills.length === 0) return;

        localStorage.setItem("skills", JSON.stringify(selectedSkills));
        window.location.href = "suggestion.html";
      });
    </script>
  <script>
    nextBtn.addEventListener("click", () => {
      if (selectedSkills.length === 0) return;

      localStorage.setItem("skills", JSON.stringify(selectedSkills));

      loadingModal.style.display = "flex";
      nextBtn.disabled = true;

      setTimeout(() => {
        // ðŸ”¥ Simulate computation (like analyzeResume)
        const start = Date.now();
        while (Date.now() - start < 900) {
          Math.sqrt(Math.random() * 9999);
        }

        window.location.href = "suggestion.html";
      }, 100);
    });

  </script>



  </body>
      <script src="../js/theme-toggle.js"></script>
</html>
